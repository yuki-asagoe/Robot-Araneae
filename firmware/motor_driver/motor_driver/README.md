# アレイニー モータードライバー

## 通信
I2Cメッセージによって制御します。一つのモーターを制御するのに1~2バイト使用し、複数モーターの制御を行う場合はそのデータを単に連結して単一のI2Cメッセージとして送信します。

### 停止させる場合
|ビット数|4|4|
|:-:|:-:|:-:|
|用途|対象モータードライバー番号|制御状態|
|値範囲|$0\sim3$|$0\sim1$|

以上合計で1バイトです。
#### 例:3番モーターを短絡ブレーキ
```
0011 0001
```

### 回転させる場合
|ビット数|4|4|8|
|:-:|:-:|:-:|:-:|
|用途|対象モータードライバー番号|制御状態|モーター速度|
|値範囲|$0\sim3$|$2\sim3$|$0\sim255$|

以上合計で2バイトです。

#### 例:1番モーターを速度127で順回転
```
0001 0010 0111 1111
```

### 注意
- 0番モーターは速度調整機能を持ちません。速度パラメータは単に無視します。
- モータードライバー番号と制御状態はそれぞれ2bitですが、値範囲に収まっていないデータがあった場合は対象ビットのみを参照します。

#### 同じ意味で解釈される例
以下はどちらも「1番モーターを速度127で逆回転」として処理されます
```
1101 1011 0111 1111
```
```
0001 0011 0111 1111
```
### 制御状態

|0|1|2|3
|:-:|:-:|:-:|:-:|
|Stop|Brake|Drive|ReverseDrive|
|出力停止|短絡ブレーキ|回転|逆転|

## 応答確認
モータードライバーにI2Cデータリクエストを送ると、自身のI2Cアドレスを返します。リアルタイムの接続確認に使用してください。